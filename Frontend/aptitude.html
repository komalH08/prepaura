<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aptitude Practice - Prepmate AI</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="practice-tool.css" />

  <!-- Particles -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

  <style>
    /* Minimal theme overrides to give glassmorphism while keeping original classes */
    :root{
      --glass-bg: rgba(255,255,255,0.04);
      --glass-border: rgba(255,255,255,0.06);
    }

    /* Particles container sits behind everything */
    #particles-js {
      position: fixed;
      inset: 0;
      z-index: -2;
      background: linear-gradient(135deg, #0a1626 0%, #102a5a 50%, #16327a 100%);
    }

    /* Slight translucent glass for the original container */
    .container {
      background: var(--glass-bg) !important;
      border: 1px solid var(--glass-border) !important;
      box-shadow: 0 12px 30px rgba(2,6,23,0.55) !important;
      backdrop-filter: blur(10px) saturate(120%) !important;
      transition: transform .28s ease, opacity .6s ease;
      border-radius: 12px !important;
    }

    /* Make headings and intro pop a little */
    #setup-screen h1 {
      color: #E6F2FF;
      margin-top: 0;
    }
    #setup-screen p { color: #D1E6FF; }

    /* Fade-in helper for the three main views */
    .fade-in {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity .6s ease, transform .5s ease;
    }
    .fade-in.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Make spinner overlay a bit sleeker */
    .spinner-overlay {
      background: rgba(4,8,16,0.7);
      color: #dbeafe;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:12px;
      border-radius:8px;
    }

    /* Small tweak for particle canvas to ensure responsive behavior */
    canvas.particles-js-canvas-el { width:100% !important; height:100% !important; }

    /* Lower the emphasis of the solution box default */
    .solution-box { color: #e6eef8; }

    @media (max-width: 700px) {
      .container { padding: 22px; }
    }
  </style>
</head>
<body>

  <!-- Particles background -->
  <div id="particles-js"></div>

  <nav class="navbar">
    <div class="nav-brand">Prepmate AI</div>
    <ul class="nav-links" id="nav-links-list">
      <!-- nav links kept intentionally empty here (same as your old file) -->
    </ul>
  </nav>

  <main class="content">
    <div class="container">

      <!-- SETUP: IDs left unchanged -->
      <div id="setup-screen" class="fade-in show">
        <h1>Aptitude Practice</h1>
        <p>Select a topic to begin your practice session.</p>
        <select id="aptitude-topic" class="tool-select">
          <option value="Quantitative Aptitude">Quantitative Aptitude</option>
          <option value="Logical Reasoning">Logical Reasoning</option>
          <option value="Verbal Ability">Verbal Ability</option>
          <option value="Data Interpretation">Data Interpretation</option>
          <option value="Mix">Mix (All Topics)</option>
        </select>
        <button id="start-btn" class="tool-button-primary">Start Practice</button>
      </div>

      <!-- PRACTICE: IDs & classes unchanged; UI styling preserved -->
      <div id="practice-screen" class="hidden fade-in" >
        <div class="stats-bar" style="display:flex; gap:12px; justify-content:space-between; align-items:center;">
          <div id="question-counter">Question: 1</div>
          <div id="question-topic">Topic: ...</div>
          <div id="question-timer">Time: 0s</div>
        </div>

        <div class="question-box" id="question-text" style="margin-top:12px;">
          Loading question...
        </div>

        <div class="options-grid" id="options-grid" style="margin-top:12px;"></div>

        <div class="nav-button-row" style="margin-top:14px; display:flex; gap:10px; justify-content:space-between; align-items:center;">
          <div style="flex:1 1 auto">
            <button id="submit-btn" class="tool-button">Submit</button>
            <button id="next-btn" class="tool-button-primary hidden">Next Question</button>
          </div>
          <div style="flex:0 0 160px; text-align:right">
            <!-- keep the solution button row and end button visible in original positions -->
            <button id="solution-btn" class="tool-button-solution hidden">Show Solution</button>
          </div>
        </div>

        <div class="solution-box hidden" id="solution-box" style="margin-top:12px;"></div>

        <div class="button-row" style="margin-top:14px;">
          <button id="end-btn" class="tool-button-danger">End Practice</button>
        </div>
      </div>

      <!-- FEEDBACK: unchanged IDs -->
      <div id="feedback-screen" class="hidden fade-in" style="margin-top:12px;">
        <h2>Practice Report</h2>
        <div class="response-box" id="feedback-report">
          Generating your feedback...
        </div>
        <button id="restart-btn" class="tool-button-primary">Practice Again</button>
      </div>

      <!-- LOADING: kept as before, styled slightly by CSS override above -->
      <div id="loading-spinner" class="spinner-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>Cooking questions for you...</p>
      </div>

    </div>
  </main>

  <script src="aptitude.js"></script>
  <script src="auth.js"></script>

  <!-- Particles config - subtle and cursor-reactive -->
  <script>
    particlesJS("particles-js", {
      particles: {
        number: { value: 40, density: { enable: true, value_area: 700 } }, // reduced count
        color: { value: "#38bdf8" },
        shape: { type: "circle" },
        opacity: { value: 0.45, random: false },
        size: { value: 2, random: true }, // smaller size
        line_linked: {
          enable: true,
          distance: 130,
          color: "#60a5fa",
          opacity: 0.28,
          width: 1
        },
        move: {
          enable: true,
          speed: 1.6,
          direction: "none",
          random: false,
          straight: false,
          out_mode: "out",
          bounce: false
        }
      },
      interactivity: {
        detect_on: "canvas",
        events: {
          onhover: { enable: true, mode: "grab" }, // cursor-reactive
          onclick: { enable: true, mode: "push" },
          resize: true
        },
        modes: {
          grab: { distance: 180, line_linked: { opacity: 0.75 } },
          repulse: { distance: 110, duration: 0.4 },
          push: { particles_nb: 3 }
        }
      },
      retina_detect: true
    });

    // keep fade-in classes in sync if JS shows/hides screens
    const fadeEls = document.querySelectorAll('.fade-in');
    const io = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) e.target.classList.add('show');
      });
    }, { threshold: 0.15 });
    fadeEls.forEach(el => io.observe(el));
  </script>
</body>
</html>
